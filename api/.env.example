# =============================================================================
# Bandhan AI - Environment Configuration
# DPDP Act 2023 Compliant Authentication Backend
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=4000
HOST=0.0.0.0
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
DATABASE_URL="postgresql://bandhan:bandhan123@localhost:5432/bandhan"

# -----------------------------------------------------------------------------
# JWT Configuration
# -----------------------------------------------------------------------------
# IMPORTANT: Use a strong, randomly generated secret in production
# Generate with: openssl rand -base64 32
JWT_SECRET="supersecretkey-change-in-production"

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_ORIGIN=true
# For production, specify your frontend URL:
# CORS_ORIGIN="https://your-frontend.com"

# -----------------------------------------------------------------------------
# AWS KMS Configuration (for AES-256-GCM encryption)
# -----------------------------------------------------------------------------
# AWS region (ap-south-1 for Mumbai, India - optimal for Indian users)
AWS_REGION=ap-south-1

# AWS credentials (use IAM roles in production)
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key

# KMS Key ID for encryption/decryption
# Create a symmetric key in AWS KMS console
AWS_KMS_KEY_ID=arn:aws:kms:ap-south-1:YOUR_ACCOUNT_ID:key/YOUR_KEY_ID

# -----------------------------------------------------------------------------
# Firebase Admin SDK Configuration (Indian Region)
# -----------------------------------------------------------------------------
# Get these from Firebase Console > Project Settings > Service Accounts
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY\n-----END PRIVATE KEY-----\n"

# Firebase service URLs (optional, defaults to standard URLs)
FIREBASE_DATABASE_URL=https://your-project.firebaseio.com
FIREBASE_STORAGE_BUCKET=your-project.appspot.com

# -----------------------------------------------------------------------------
# DigiLocker OAuth Configuration (MeitY API)
# -----------------------------------------------------------------------------
# Register at https://www.digilocker.gov.in/ for API access
DIGILOCKER_CLIENT_ID=your-digilocker-client-id
DIGILOCKER_CLIENT_SECRET=your-digilocker-client-secret

# DigiLocker OAuth URLs (production)
DIGILOCKER_AUTH_URL=https://digilocker.meripehchaan.gov.in/public/oauth2/1/authorize
DIGILOCKER_TOKEN_URL=https://digilocker.meripehchaan.gov.in/public/oauth2/1/token
DIGILOCKER_PROFILE_URL=https://digilocker.meripehchaan.gov.in/public/oauth2/1/profile
DIGILOCKER_INTROSPECT_URL=https://digilocker.meripehchaan.gov.in/public/oauth2/1/introspect

# Redirect URI (must match what's registered with DigiLocker)
DIGILOCKER_REDIRECT_URI=http://localhost:4000/auth/digilocker/callback
# Production: https://api.bandhan.ai/auth/digilocker/callback

# -----------------------------------------------------------------------------
# Redis Configuration (Optional - for session caching)
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# -----------------------------------------------------------------------------
# MSG91 Fallback Configuration (Optional - for SMS OTP fallback)
# -----------------------------------------------------------------------------
# If Firebase SMS is unavailable, MSG91 can be used as fallback
MSG91_AUTHKEY=your-msg91-auth-key
MSG91_SENDER_ID=your-sender-id
MSG91_COUNTRY_CODE=91

# -----------------------------------------------------------------------------
# Video Selfie Configuration
# -----------------------------------------------------------------------------
# Maximum video file size in bytes (default: 10MB)
MAX_VIDEO_SIZE=10485760

# Allowed video formats
ALLOWED_VIDEO_FORMATS=video/mp4,video/webm,video/quicktime

# Liveness detection service (optional - for production integration)
# Options: aws-rekognition, azure-face, onfido, jumio
LIVENESS_DETECTION_PROVIDER=aws-rekognition

# AWS Rekognition Configuration (if using)
AWS_REKOGNITION_COLLECTION_ID=bandhan-face-collection

# -----------------------------------------------------------------------------
# DPDP Act 2023 Compliance Settings
# -----------------------------------------------------------------------------
# Data retention periods (in days)
LOCATION_RETENTION_DAYS=90
SESSION_RETENTION_DAYS=30
AUDIT_LOG_RETENTION_DAYS=365

# Grievance Officer Contact (required under DPDP Act)
GRIEVANCE_OFFICER_EMAIL=grievance.officer@bandhan.ai
GRIEVANCE_OFFICER_NAME=Your Grievance Officer Name

# Data Principal Rights Notice URL
DPDP_RIGHTS_NOTICE_URL=https://bandhan.ai/dpdp-rights-notice

# -----------------------------------------------------------------------------
# Monitoring & Analytics (Optional)
# -----------------------------------------------------------------------------
# Sentry for error tracking
SENTRY_DSN=

# Datadog for monitoring
DATADOG_API_KEY=

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=1m

# OTP-specific rate limiting
OTP_MAX_ATTEMPTS=5
OTP_EXPIRY_MINUTES=5
OTP_RATE_LIMIT_PER_HOUR=5
